webpackJsonp([6],{"58/M":function(t,e,s){"use strict";var o=s("Dd8w"),i=s.n(o),n=s("NYxO");e.a={props:["type","asset"],data:function(){return{canBuy:!1,loader:null,loading:!1}},watch:{asset:function(){this.checkLogin()},loader:function(){var t=this,e=this.loader;this[e]=!this[e],setTimeout(function(){t[e]=!1,t.newOrder=!0},3e3),this.loader=null}},computed:i()({},Object(n.mapGetters)({user:"getUserStatus",client_logged_in:"getClientLogin"})),created:function(){this.checkLogin()},methods:{openQuoteDialog:function(){var t=this,e={type:this.type,asset_alpha_id:this.asset.alpha_id};axios.post("/client/collections",e).then(function(e){t.$store.commit("setBuyQuoteCollection",e.data),t.$store.commit("setBuyQuoteAsset",t.asset),t.$store.commit("setBuyQuoteType",t.type),t.$store.commit("setQuoteDialog",!0)}).catch(function(t){console.log(t)})},createCollection:function(){var t=this,e={type:this.type,asset_alpha_id:this.asset.alpha_id};axios.post("/client/collections",e).then(function(e){t.$store.commit("setBuyQuoteCollection",e.data),t.$store.commit("setBuyQuoteAsset",t.asset),t.$store.commit("setBuyQuoteType",t.type),t.$store.commit("setBuyDialog",!0)}).catch(function(t){console.log(t)})},checkLogin:function(){this.canBuy=!(!this.client_logged_in||"exceptional"===this.asset.class||""===this.asset.class||!this.asset.class||0===this.user.active)},getAssetPurchased:function(){return!!("video"===this.type&&this.asset.video_collections&&this.asset.video_collections.length>0)||!!("story"===this.type&&this.asset.story_collections&&this.asset.story_collections.length>0)},onDownloadVideo:function(){if("video"===this.type){this.loader="loading";var t="/client/videos/"+this.asset.id+"/download";window.location=t}if("story"===this.type){t="/client/stories/"+this.asset.id+"/download";window.location=t}}}}},"7KGw":function(t,e,s){"use strict";var o=s("58/M"),i=s("cRwL"),n=s("VU/8")(o.a,i.a,!1,null,null,null);n.options.__file="resources/nuxt/components/includes/BuyQuoteButtonComponent.vue",e.a=n.exports},"8LqV":function(t,e,s){"use strict";var o=s("Dd8w"),i=s.n(o),n=s("7KGw"),a=s("NYxO");e.a={components:{BuyQuoteButtonComponent:n.a},computed:i()({},Object(a.mapGetters)({client_login:"getClientLogin"})),data:function(){return{purchased:!1}},props:{story:{type:Object,required:!0},type:{type:String,required:!1}},created:function(){this.getIsPurchasedAsset()},methods:{getFilterText:function(t,e){if(null==t)return"";var s=document.createElement("DIV");return s.innerHTML=t,s.textContent.substring(0,e)||s.innerText.substring(0,e)||""},onStoryDetail:function(){this.$router.push({name:"stories_detail",params:{alpha_id:this.story.alpha_id}})},getIsPurchasedAsset:function(){this.story.story_collections&&this.story.story_collections.length>0?this.purchased=!0:this.purchased=!1}}}},HbLd:function(t,e,s){"use strict";var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-flex",{staticClass:"story-content pb-3",attrs:{"d-flex":"",xs12:"",sm12:"",md6:"",lg6:"",xl6:""}},[s("v-layout",{attrs:{row:"",wrap:""}},[s("v-flex",{attrs:{xs12:"",sm5:"",md5:"",lg5:"",xl5:""}},[s("v-card",{staticClass:"story-media-thumbnail",attrs:{contain:""}},[s("v-card-media",{attrs:{src:t.story.thumb,height:"100%"}},[t.purchased?s("span",{staticClass:"label label-licensed"},[t._v("Purchased")]):t._e()])],1)],1),s("v-flex",{staticClass:"py-2",attrs:{xs12:"",sm7:"",md7:"",lg7:"",xl7:""}},[s("h2",{domProps:{innerHTML:t._s(t.getFilterText(t.story.title,50))}}),s("div",{staticClass:"description",domProps:{innerHTML:t._s(t.getFilterText(t.story.description,220))}}),s("v-layout",{attrs:{row:"",wrap:"","align-end":""}},[s("v-flex",[s("buy-quote-button-component",{attrs:{type:"story",asset:t.story}})],1),s("v-flex",[s("v-btn",{staticClass:"mb-0",attrs:{dark:"",color:"dark",raised:"",block:""},on:{click:t.onStoryDetail}},[t._v("View\n                    ")])],1)],1)],1)],1)],1)};o._withStripped=!0;var i={render:o,staticRenderFns:[]};e.a=i},cRwL:function(t,e,s){"use strict";var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-layout",{attrs:{row:"",wrap:""}},[t.getAssetPurchased()?s("v-flex",{attrs:{xs12:""}},[s("v-btn",{staticClass:"mb-0",attrs:{block:"",dark:"",color:"dark",loading:t.loading,disabled:t.loading},nativeOn:{click:function(e){t.onDownloadVideo()}}},[t._v("\n            Download Video\n        ")])],1):s("v-flex",{attrs:{xs12:""}},[s("v-btn",{staticClass:"mb-0",attrs:{dark:"",block:""},on:{click:function(e){e.stopPropagation(),t.openQuoteDialog()}}},[t._v("Request Quote\n        ")])],1)],1)};o._withStripped=!0;var i={render:o,staticRenderFns:[]};e.a=i},llKJ:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s("8LqV"),i=s("HbLd"),n=s("VU/8")(o.a,i.a,!1,null,null,null);n.options.__file="resources/nuxt/pages/stories/modules/StoryLoopComponent.vue",e.default=n.exports}});